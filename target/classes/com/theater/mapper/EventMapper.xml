<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.theater.mapper.EventMapper">

<sql id="criteria">
  <trim prefix="(" suffix=") AND" prefixOverrides="OR">
    <foreach item="type" collection="typeArr">
            <!-- Criteria->이름 같으면 getTypeArr(자동 호출) 실행 -->
      <trim prefix="OR">
        <choose>
          <when test="type== 'T'.toString()">
            title like '%'||#{keyword}||'%'
          </when>
          <when test="type== 'C'.toString()">
            content like '%'||#{keyword}||'%'
          </when>
        </choose>
      </trim>
    </foreach>
  </trim>
</sql>

<!-- admin -->
<insert id="eventInsert">
  <selectKey keyProperty="event_cd" order="BEFORE" resultType="int">
<!-- 삽입 -->
    select event_seq.nextval from dual
  </selectKey>
  insert into event (event_cd,title,e_img,content)
  values (#{event_cd},#{title},#{e_img},#{content})
</insert>

<select id="getAdminList" resultType="com.theater.domain.EventVO">
  select * from event
</select>

<select id="getAdminBoardView" resultType="com.theater.domain.EventVO">
select * from event where nt_cd= #{nt_cd}
</select>




</mapper>
