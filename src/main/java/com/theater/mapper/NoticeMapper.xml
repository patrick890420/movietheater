<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<mapper namespace="com.theater.mapper.NoticeMapper">


<!-- 삽입 -->
<insert id="insert">
  <selectKey keyProperty="nt_cd" order="BEFORE" resultType="int">
    select notice_seq.nextval from dual
  </selectKey>
  insert into notice (nt_cd,title,e_img,content,wdate,hits)
  values (#{nt_cd},#{e_img},#{content},#{hits},sysdate,0)
</insert>


<!-- page 기법 처리/ 해당 페이지 검색 -->
<select id="getListWithPaging" resultType="com.theater.domain.NoticeVO">
  <![CDATA[
  select nt_cd,title,e_img,content,wdate,hits from(
  select /*+ index_desc(notice notice_pk)*/ rownum rn, nt_cd,title,e_img,content,wdate,hits
  from notice
  where
    ]]>
    
  <include refid="criteria"/> <!-- 반복실행 문장 -->
    <![CDATA[
    rownum <= #{pageNum} * #{amount}
    ) where rn > (#{pageNum}-1)*#{amount}
    ]]>
</select>


</mapper>
